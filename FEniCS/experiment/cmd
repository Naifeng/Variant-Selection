#for np in 1 2 4 8 16 32; do sh -c "mpirun -np $np python demo_cavity.py  2>&1 | tee meas/256x256/mumps/atlas-blas-st/mpi/np$np.log"; done

# run in /cavity
for np in 1 2 4 8; do for th in 1 2 4; do sh -c "export OMP_NUM_THREADS=$th && mpirun -np $np python demo_cavity.py  2>&1 | tee meas/256x256/mumps/atlas-blas-st/mpi/np$np/th_2_$th.log"; done; done
# ... remaining pairwise combinations ....
for np in 32; do for th in 1; do sh -c "export OMP_NUM_THREADS=$th && mpirun --oversubscribe -np $np python demo_cavity.py  2>&1 | tee meas/256x256/mumps/atlas-blas-st/mpi/np$np/th_2_$th.log"; done; done

# try this
for i in 0 1 2 3 4 5; do ((np=2**i)); ((k=6-$i)); for ((j=0;j<k;++j)); do ((th=2**j)); sh -c "export OMP_NUM_THREADS=$th && mpirun -np $np python demo_cavity.py  2>&1 | tee meas/256x256/mumps/atlas-blas-st/mpi/np$np/th_2_$th.log"; done; done
# slots are not available for np = 32